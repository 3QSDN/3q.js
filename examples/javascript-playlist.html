<!DOCTYPE html>
<html lang="de">
<head>
    <!-- Embed Jquery -->
    <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
    <!-- Player Resources --->
    <script type="text/javascript" src="https://playout.3qsdn.com/player/js/sdnplayer.js"></script>
    <link href="https://playout.3qsdn.com/player/css/player.css" type="text/css" rel="stylesheet" media="all"/>
</head>
<body style="background:#fff;width:100%;height:100%;margin:0;padding:0">

<div class="content" style="width:640px;height:360px;margin-left:auto;margin-right:auto;">
    <!-- Player Container -->
    <h1>Headline ....</h1>
    <p>Some Text</p>
    <div id="sdnPlayer" style="width:100%;height:100%;"></div>
</div>
<script type="text/javascript">
    var playlistIndex = 0;
    // Playlist
    var playlist = ({
        0: {
            playoutId : 'c8dbe7f4-7f7f-11e6-a407-0cc47a188158',
            start: 20,
            end: 30
        },
        1: {
            playoutId : 'c8dbe7f4-7f7f-11e6-a407-0cc47a188158',
            start: 10,
            end: 40
        }
    });

    function destroyPlayer() {
        var sdnPlayer = document.getElementById(_config.container+'_player');
        if (sdnPlayer && typeof sdnPlayer.destroy === 'function') {
            console.log('player destroyed');
            sdnPlayer.destroy();
        }
    }
    function loadFile(index) {
        loadPlayer(playlist[index].playoutId, playlist[index].start, playlist[index].end);
    }

    function playNext() {
        playlistIndex++;
        if(playlist[index]) {
            loadFile(playlistIndex);
        } else {
            playlistIndex = 0;
            loadFile(playlistIndex);
        }
    }


    var _sdnPlayerContainer = 'sdnPlayer';
    var _sdnPlayer;
    var _sdnPlayerHeight = "100%25";
    function sdnPlayerBridge(playerId, event, data) {
        // player events
        switch (event) {
            case "complete":
                playNext();
            break;
           }
    }

    function sdnJsonP(data) {
        eval(data.response);
    }

    function loadPlayer(uuid,start,end) {

        destroyPlayer();

        var sdnPlayerHeight = $('#sdnPlayer').width()/ 1.78;
        $.ajax({
            type: 'GET',
            url: 'https://playout.3qsdn.com/' + uuid + '?timestamp=0&key=0&jsonp=sdnJsonP&usejsonp=true&container='+_sdnPlayerContainer+'&width=100%25&height='+_sdnPlayerHeight+'&protocol=https&autoplay=false&start='+start+'&end='+end,
            dataType: 'jsonp',
            jsonp: false,
            jsonpCallback: "sdnJsonMethod",
            crossDomain: true
        });

        $('#sdnPlayer').css({
            height: $('#sdnPlayer').width()/ 1.78
        });

    }
    // Init Player
    loadFile(playlistIndex); // Firststart.
</script>
</body>
</html>
